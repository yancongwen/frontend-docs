# 解决WFS矢量要素重复加载问题
> 技术选型：Openlayer + Arcgis Server WFS 服务

### 问题描述
使用的是Arcgis server 服务，在做图层矢量要素编辑的功能时，选中要素时，要素会有一定高亮效果，但是总是出现奇怪现象，高亮效果不消失。或在执行删除矢量要素操作时，发现明明已经执行了删除操作，但是图层上仍然显示该要素。

### 查找原因
- 当时图进行拖动或缩放，会自动向服务器请求该视图区域下要素，如果统计当前图层的要素数量，会发现其大于图层原本的要素数量。
- 因服务发布原因，可能发布的服务中返回的 `objectIdFieldName`值为空，该字段的值是指 `objectID` 字段的名称，而该字段对于wfs要素加载至关重要，缺少该字段，会导致wfs同一要素在地图上重复加载。

### 解决
若请求返回中缺少该字段，可从所有字段中找到字段类型为`esriFieldTypeOID`的字段，将该字段设置为`objectIdFieldName`。筛选要素可以使用 `where`参数。